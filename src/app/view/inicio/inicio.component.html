<app-navbar></app-navbar>
<header >



</header>

<body class="content-center">
  <p class="h-3"></p>

  <div class="flex justify-center text-3xl  items-center">Reporte Venta</div>



  <p class="my-2 text-sm font-medium text-gray-500 uppercase">Listado</p>
    <div class="w-full shadow-lg ">
        <div class="relative h-auto overflow-x-auto overflow-y-auto " style="height: 48vh;">
            <table class="relative w-full whitespace-no-wrap bg-white border-collapse table-auto table-striped">
                <!-- Titulos -->
                <thead class="z-10">
                    <tr class="text-sm font-medium text-left text-black border-b border-gray-200 ">
                        <th class="sticky top-0 w-auto px-5 py-3 font-medium whitespace-nowrap bg-gray-50"> Vendedor            </th>
                        <th class="sticky top-0 w-auto px-5 py-3 font-medium whitespace-nowrap bg-gray-50"> N° Ventas           </th>
                        <th class="sticky top-0 w-auto px-5 py-3 font-medium whitespace-nowrap bg-gray-50"> Total S/. Ventas    </th>
                        <th class="sticky top-0 w-auto px-5 py-3 font-medium whitespace-nowrap bg-gray-50"> Total S/. Descuento </th>
                    </tr>
                </thead>
                <!-- Contenido -->
                <tbody>
                    <tr *ngFor="let item of listaVentas; let i = index;"
                        class="text-xs border-b border-gray-200 cursor-pointer hover:bg-gray-50">
                        <!-- Concepto -->
                        <td class="w-auto px-5 py-1 text-sm font-normal text-gray-900">
                            <!-- [matMenuTriggerFor]="AgregarAnticipo" -->
                            <!-- <span class="text-left whitespace-nowrap">{{ item.concept }}</span> -->

                            <mat-select (selectionChange)="onchangeConcepto(concepto.value, i)" [(value)]="item.concept"
                                        [class.error]="conceptInvalid"
                                        type="text"
                                        required placeholder="AFECTO" class="w-full sm:mb-1 text-sm  flex items-center border border-gray-300 py-1 rounded px-2 focus"
                                        #concepto
                                        >
                                <mat-option value="Afecto">Afecto</mat-option>
                                <mat-option value="Exonerado">Exonerado</mat-option>
                                <mat-option value="Inafecto">Inafecto</mat-option>

                            </mat-select>

                        </td>
                        <!-- Nombre del producto -->
                        <td class="px-5 py-1 text-sm font-normal text-gray-900">
                            <!-- [matMenuTriggerFor]="AgregarAnticipo" -->
                            <!-- <span class="uppercase text-left whitespace-nowrap">{{ item.nameProduct }}</span> -->

                            <!-- NOMBRE PRODUCT -->
                            <!-- <input  #description
                                    type="text"
                                    class="uppercase py-1  px-2  focus:outline-none border-gray-200 border rounded"
                                    (input)="onChangeDescriptionDetails(description.value, i)"
                                    [(value)]="item.nameProduct"
                                    [class.error]="item.nameProduct.length < 3"
                                    > -->
                            <div class="border border-gray-300 rounded px-1"
                                [class.error]="item.nameProduct.length < 3">
                                <textarea   cdkTextareaAutosize
                                            class="uppercase w-full text-xs h-6 focus:outline-none"
                                            #autosize="cdkTextareaAutosize"
                                            cdkAutosizeMinRows="1"
                                            cdkAutosizeMaxRows="5"
                                            required
                                            placeholder="Ingrese la descripción del item"
                                            (input)="onChangeDescriptionDetails(description.value, i)"
                                            [(value)]="item.nameProduct"
                                            #description >
                                </textarea>
                            </div>

                        </td>
                        <!-- Uni. Medida -->
                        <td class="w-auto px-5 py-1 text-sm font-normal text-gray-900">
                            <!-- [matMenuTriggerFor]="AgregarAnticipo" -->
                            <!-- <span class="text-left whitespace-normal">{{ item.unidadM }}</span> -->

                            <mat-select (selectionChange)="onchangeUnidadMedida(UMedida.value, i)" [(value)]="item.unidadM" type="number" name="tipouser" required
                                placeholder="Unidad" class="w-full sm:mb-1 text-sm  border border-gray-300 py-1 flex items-center rounded px-2 focus" #UMedida >
                                <mat-option [value]="item.Abreviatura" *ngFor="let item of listUnidadM">{{
                                    item.Abreviatura }}</mat-option>
                            </mat-select>

                        </td>

                        <!-- Cantidad -->
                        <td class="w-auto px-5 py-1 text-sm font-normal text-gray-900">
                            <div class="relative flex flex-row justify-start w-full rounded-lg h-9">
                                <!-- Boton de resta -->
                                <button data-action="decrement"
                                    (click)="QuantityMinus(item.quantity , item.nameProduct )" type="button"
                                    class="flex items-center justify-center w-10 h-full rounded-l cursor-pointer hover:bg-gray-100 focus:outline-none">
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <rect x="0.6" y="0.6" width="18.8" height="18.8" rx="9.4" stroke="#EA3E3E"
                                            stroke-width="1.2" />
                                        <rect x="5" y="9" width="10" height="2" fill="#EA3E3E" />
                                    </svg>
                                </button>
                                <!-- Input numerico -->
                                <input disabled type="number"
                                    class="flex items-center w-10 font-medium text-center text-gray-700 focus:outline-none text-md"
                                    name="custom-input-number" value="{{item.quantity}}">
                                <!-- Boton de suma -->
                                <button (click)="QuantityPlus( item.quantity, item.nameProduct )" type="button"
                                    class="flex items-center justify-center w-10 h-full rounded-r cursor-pointer hover:bg-gray-100 focus:outline-none">
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <rect x="0.6" y="0.6" width="18.8" height="18.8" rx="9.4" stroke="#EA3E3E"
                                            stroke-width="1.2" />
                                        <path d="M15 9.2H10.8V5H9.2V9.2H5V10.8H9.2V15H10.8V10.8H15V9.2Z"
                                            fill="#EA3E3E" />
                                    </svg>
                                </button>
                            </div>
                        </td>
                        <!-- Precio Unitario -->
                        <td class="w-auto px-5 py-1 text-sm font-normal text-gray-900">
                            <!-- [matMenuTriggerFor]="AgregarAnticipo" -->
                            <!-- <span class="text-left whitespace-nowrap">{{ item.price }}</span> -->
                            <div class="">
                            <input #price type="number"
                                class="uppercase py-1  px-2 flex items-center  focus:outline-none border-gray-200 border rounded"
                                (keypress)="validateKey( $event, 9 )" (input)="onChangePriceDetails(price.value, i)"
                                [(value)]="item.price"
                                [class.error]="item.price === undefined || item.price === null || item.price === '' || item.price < 0 ">
                            </div>

                        </td>
                        <!-- Total -->
                        <td class="w-auto px-5 py-1 text-sm font-normal text-gray-900">
                            <!-- [matMenuTriggerFor]="AgregarAnticipo" -->
                            <div class="w-full">
                                <span class="text-left  w-full">{{ item.total | decimals : pipedecimal }}</span>
                            </div>
                        </td>

                        <!--Boton Eliminar -->
                        <td class="px-5 py-1 text-sm">
                            <div class="flex justify-center">
                                <button (click)="showModalDelete( i )"
                                    class=" flex items-center p-1 px-2 rounded shadow-xs bg-red-50 hover:bg-red-100 focus:outline-none">
                                    <svg width="30" height="30" viewBox="0 0 30 30" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="15" cy="15" r="14" stroke="#EA3E3E" stroke-width="2" />
                                        <path
                                            d="M9.81429 20.4444C9.81429 21.3 10.5471 22 11.4429 22H17.9571C18.8529 22 19.5857 21.3 19.5857 20.4444V12.6667C19.5857 11.8111 18.8529 11.1111 17.9571 11.1111H11.4429C10.5471 11.1111 9.81429 11.8111 9.81429 12.6667V20.4444ZM12.3956 14.3544C12.4709 14.2823 12.5604 14.2251 12.6589 14.1861C12.7574 14.1471 12.863 14.127 12.9696 14.127C13.0763 14.127 13.1819 14.1471 13.2804 14.1861C13.3789 14.2251 13.4684 14.2823 13.5437 14.3544L14.7 15.4589L15.8563 14.3544C15.9317 14.2824 16.0212 14.2253 16.1197 14.1863C16.2182 14.1474 16.3237 14.1273 16.4304 14.1273C16.537 14.1273 16.6425 14.1474 16.741 14.1863C16.8395 14.2253 16.929 14.2824 17.0044 14.3544C17.0798 14.4265 17.1396 14.5119 17.1804 14.606C17.2212 14.7001 17.2422 14.8009 17.2422 14.9028C17.2422 15.0046 17.2212 15.1055 17.1804 15.1995C17.1396 15.2936 17.0798 15.3791 17.0044 15.4511L15.8481 16.5556L17.0044 17.66C17.0798 17.732 17.1396 17.8175 17.1804 17.9116C17.2212 18.0057 17.2422 18.1065 17.2422 18.2083C17.2422 18.3102 17.2212 18.411 17.1804 18.5051C17.1396 18.5992 17.0798 18.6847 17.0044 18.7567C16.929 18.8287 16.8395 18.8858 16.741 18.9248C16.6425 18.9637 16.537 18.9838 16.4304 18.9838C16.3237 18.9838 16.2182 18.9637 16.1197 18.9248C16.0212 18.8858 15.9317 18.8287 15.8563 18.7567L14.7 17.6522L13.5437 18.7567C13.4683 18.8287 13.3788 18.8858 13.2803 18.9248C13.1818 18.9637 13.0763 18.9838 12.9696 18.9838C12.863 18.9838 12.7575 18.9637 12.659 18.9248C12.5605 18.8858 12.471 18.8287 12.3956 18.7567C12.3202 18.6847 12.2604 18.5992 12.2196 18.5051C12.1788 18.411 12.1578 18.3102 12.1578 18.2083C12.1578 18.1065 12.1788 18.0057 12.2196 17.9116C12.2604 17.8175 12.3202 17.732 12.3956 17.66L13.5519 16.5556L12.3956 15.4511C12.3201 15.3792 12.2602 15.2937 12.2193 15.1996C12.1785 15.1055 12.1574 15.0046 12.1574 14.9028C12.1574 14.8009 12.1785 14.7 12.2193 14.606C12.2602 14.5119 12.3201 14.4264 12.3956 14.3544ZM17.55 8.77778L16.9719 8.22556C16.8253 8.08556 16.6136 8 16.4019 8H12.9981C12.7864 8 12.5747 8.08556 12.4281 8.22556L11.85 8.77778H9.81429C9.36643 8.77778 9 9.12778 9 9.55556C9 9.98333 9.36643 10.3333 9.81429 10.3333H19.5857C20.0336 10.3333 20.4 9.98333 20.4 9.55556C20.4 9.12778 20.0336 8.77778 19.5857 8.77778H17.55Z"
                                            fill="#EA3E3E" />
                                    </svg>
                                </button>

                            </div>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>


</body>
